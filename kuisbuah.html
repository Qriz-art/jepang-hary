<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Buah Hiragana - 20 Soal</title>
    <style>
        body { font-family: 'Poppins', sans-serif; background: #fdfdfd; padding: 20px; text-align: center; }
        .back-link { text-align: left; max-width: 500px; margin: 0 auto 15px; }
        .back-link a { text-decoration: none; color: #fb8500; font-weight: bold; }

        .quiz-container { 
            max-width: 500px; margin: 0 auto; background: white; 
            padding: 25px; border-radius: 20px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); 
        }

        .status-bar { display: flex; justify-content: space-between; margin-bottom: 15px; color: #666; font-size: 0.9rem; }
        
        .hiragana-display { 
            font-size: 4.5rem; font-weight: bold; color: #fb8500; 
            margin: 20px 0; background: #fff9f1; border-radius: 15px; padding: 20px;
            border: 2px dashed #ffb703;
        }

        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        
        .option-btn { 
            padding: 15px; font-size: 1.1rem; border: 2px solid #eee; 
            border-radius: 12px; cursor: pointer; background: white; transition: 0.2s;
            font-family: 'Poppins', sans-serif;
        }
        
        .option-btn:hover { border-color: #fb8500; background: #fff9f1; }

        .btn-next { 
            display: none; width: 100%; margin-top: 20px; padding: 15px; 
            background: #fb8500; color: white; border: none; 
            border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1rem;
        }

        #result-msg { margin-top: 15px; font-weight: bold; min-height: 24px; }
    </style>
</head>
<body>

    <div class="back-link">
        <a href="index.html">‚Üê Kembali ke Menu</a>
    </div>

    <div class="quiz-container" id="quiz-box">
        <div class="status-bar">
            <span>Soal: <b id="question-num">1</b> / 20</span>
            <span>Skor: <b id="current-score">0</b></span>
        </div>
        
        <div id="target-hiragana" class="hiragana-display">...</div>

        <div class="options-grid" id="options-container"></div>

        <div id="result-msg"></div>
        <button id="next-btn" class="btn-next" onclick="nextQuestion()">Soal Berikutnya ‚Üí</button>
    </div>

    <script>
        // Data Buah (Hiragana & Arti)
        const fruitData = [
            { h: "„Çä„Çì„Åî", a: "Apel" }, { h: "„Åø„Åã„Çì", a: "Jeruk" }, { h: "„Å∂„Å©„ÅÜ", a: "Anggur" },
            { h: "„Åô„ÅÑ„Åã", a: "Semangka" }, { h: "„ÅÑ„Å°„Åî", a: "Stroberi" }, { h: "„ÇÇ„ÇÇ", a: "Persik" },
            { h: "„Å™„Åó", a: "Pir" }, { h: "„Åã„Åç", a: "Kesemek" }, { h: "„Åï„Åè„Çâ„Çì„Åº", a: "Ceri" },
            { h: "„ÇÅ„Çç„Çì", a: "Melon" }, { h: "„Å∞„Å™„Å™", a: "Pisang" }, { h: "„Å±„ÅÑ„Å™„Å£„Å∑„Çã", a: "Nanas" },
            { h: "„ÇÜ„Åö", a: "Jeruk Yuzu" }, { h: "„Åè„Çä", a: "Kastanye" }, { h: "„ÅÑ„Å°„Åò„Åè", a: "Buah Tin" },
            { h: "„Çå„ÇÇ„Çì", a: "Lemon" }, { h: "„Åæ„Çì„Åî„Éº", a: "Mangga" }, { h: "„Å±„Å±„ÅÑ„ÇÑ", a: "Pepaya" },
            { h: "„Åç„ÅÜ„ÅÑ", a: "Kiwi" }, { h: "„Çâ„ÅÑ„Å°", a: "Leci" }
        ];

        let currentIdx = 0;
        let score = 0;
        let shuffledData = [];

        function initQuiz() {
            shuffledData = [...fruitData].sort(() => Math.random() - 0.5).slice(0, 20);
            loadQuestion();
        }

        function playSound(text) {
            const utter = new SpeechSynthesisUtterance(text);
            utter.lang = 'ja-JP';
            window.speechSynthesis.speak(utter);
        }

        function loadQuestion() {
            const q = shuffledData[currentIdx];
            document.getElementById('question-num').innerText = currentIdx + 1;
            document.getElementById('target-hiragana').innerText = q.h;
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('result-msg').innerText = '';
            
            const container = document.getElementById('options-container');
            container.innerHTML = '';

            let choices = [q];
            while(choices.length < 4) {
                let rand = fruitData[Math.floor(Math.random() * fruitData.length)];
                if(!choices.find(c => c.a === rand.a)) choices.push(rand);
            }
            choices.sort(() => Math.random() - 0.5);

            choices.forEach(choice => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = choice.a;
                btn.onclick = () => {
                    playSound(q.h);
                    checkAnswer(choice.a === q.a, btn);
                };
                container.appendChild(btn);
            });
        }

        function checkAnswer(isCorrect, btn) {
            const allBtns = document.querySelectorAll('.option-btn');
            allBtns.forEach(b => b.style.pointerEvents = 'none');

            if(isCorrect) {
                btn.style.background = "#d4edda";
                btn.style.borderColor = "#28a745";
                document.getElementById('result-msg').innerHTML = "<span style='color: green;'>Benar! üçé</span>";
                score += 5;
            } else {
                btn.style.background = "#f8d7da";
                btn.style.borderColor = "#dc3545";
                document.getElementById('result-msg').innerHTML = "<span style='color: red;'>Salah! ‚ùå</span>";
            }
            document.getElementById('current-score').innerText = score;
            document.getElementById('next-btn').style.display = 'block';
        }

        function nextQuestion() {
            currentIdx++;
            if(currentIdx < 20) {
                loadQuestion();
            } else {
                document.getElementById('quiz-box').innerHTML = `
                    <h2 style="color: #fb8500;">Kuis Selesai! üçä</h2>
                    <p>Skor Akhir Anda:</p>
                    <h1 style="font-size: 4rem; color: #fb8500;">${score}</h1>
                    <button onclick="location.reload()" style="padding: 15px 30px; background: #fb8500; color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: bold;">Ulangi Kuis</button>
                `;
            }
        }

        initQuiz();
    </script>
</body>
</html>